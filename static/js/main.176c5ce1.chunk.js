(this["webpackJsonpcharter-challenge"]=this["webpackJsonpcharter-challenge"]||[]).push([[0],{35:function(e,t,n){e.exports=n(52)},37:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);n(36),n(37);var a=n(1),r=n.n(a),c=n(26),l=n.n(c),o=n(0),u=n(10),i=n(11),s=n(27),m=n.n(s),d=n(6),h=n.n(d),E=function(e){return function(t){return new Promise((function(n,a){var r;return h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,t.ok){c.next=16;break}return c.t0=Error,c.next=5,h.a.awrap(t.json());case 5:if(c.t2=r=c.sent,c.t1=null===c.t2,c.t1){c.next=9;break}c.t1=void 0===r;case 9:if(!c.t1){c.next=13;break}c.t3=void 0,c.next=14;break;case 13:c.t3=r.message;case 14:throw c.t4=c.t3,new c.t0(c.t4);case 16:return c.t5=n,c.t6=e,c.next=20,h.a.awrap(t.json());case 20:c.t7=c.sent,c.t8=(0,c.t6)(c.t7),(0,c.t5)(c.t8),c.next=28;break;case 25:c.prev=25,c.t9=c.catch(0),a(c.t9);case 28:case"end":return c.stop()}}),null,null,[[0,25]])}))}},f="Api-Key q3MNxtfep8Gt",g="https://code-challenge.spectrumtoolbox.com/api/restaurants",p=function(e){return e.map((function(e){return Object(i.a)({},e,{tags:e.tags.split(","),genre:e.tags.split(",")})})).sort((function(e,t){return e.name>t.name?1:-1}))},b=n(18),S=n(19),v=n(12),A=function(e){var t=e.children;return r.a.createElement("header",{className:"mb-3",style:{background:"gainsboro"}},r.a.createElement(b.a,null,r.a.createElement(S.a,null,r.a.createElement(v.a,null,t))))},x=function(e){var t=e.children;return r.a.createElement(v.a,{as:"aside",sm:3},t)},N=function(e){var t=e.children;return r.a.createElement(v.a,{as:"main",sm:9},t)},O=function(e){var t=e.children;return r.a.createElement(b.a,null,r.a.createElement(S.a,null,t))},M=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,t)},j=n(28),k=n(34),y=(n(30),n(8)),C=Object(a.createContext)({control:null,register:null}),T=function(e){var t=Object(a.useContext)(C).register;return r.a.createElement(y.a.Control,Object.assign({ref:t},e))},I=function(e){return r.a.createElement(y.a.Group,{controlId:e.name},e.label&&r.a.createElement(y.a.Label,null,e.label),r.a.createElement(T,{name:e.name,type:e.type||"text"}),e.subText&&r.a.createElement(y.a.Text,null,e.subText))},w=n(20),D=n(29),L=n(14),R=function(e){return r.a.createElement(w.a,null,r.a.createElement(T,{name:e.name,type:"text",placeholder:e.placeholder}),r.a.createElement(w.a.Append,null,r.a.createElement(D.a,{onClick:e.onClick},r.a.createElement(L.b,{style:{marginTop:-3}}))))},W=function(e){var t=e.name,n=e.options,a=e.placeholder,c=e.className,l=e.label,o=e.subText,u=e.onChange;return r.a.createElement(y.a.Group,{className:c,controlId:t},l&&r.a.createElement(y.a.Label,null,l),r.a.createElement(T,{name:t,onChange:function(e){return null===u||void 0===u?void 0:u(e)},as:"select",custom:!0},a&&r.a.createElement("option",{value:""},a),Object.keys(n).map((function(e){return r.a.createElement("option",{key:e,value:n[e]},n[e])}))),o&&r.a.createElement(y.a.Text,null,o))},P=function(e){var t=e.control,n=e.register,a=e.children,c=Object(k.a)(e,["control","register","children"]);return r.a.createElement(C.Provider,{value:{control:t,register:n}},r.a.createElement(y.a,c,a),!1)};P.Group=y.a.Group,P.Label=y.a.Label,P.Control=T,P.Text=y.a.Text,P.Input=I,P.SearchInput=R,P.Select=W;var V,F,G,H=P;!function(e){e.AL="AL",e.AK="AK",e.AS="AS",e.AZ="AZ",e.AR="AR",e.CA="CA",e.CO="CO",e.CT="CT",e.DE="DE",e.DC="DC",e.FM="FM",e.FL="FL",e.GA="GA",e.GU="GU",e.HI="HI",e.ID="ID",e.IL="IL",e.IN="IN",e.IA="IA",e.KS="KS",e.KY="KY",e.LA="LA",e.ME="ME",e.MH="MH",e.MD="MD",e.MA="MA",e.MI="MI",e.MN="MN",e.MS="MS",e.MO="MO",e.MT="MT",e.NE="NE",e.NV="NV",e.NH="NH",e.NJ="NJ",e.NM="NM",e.NY="NY",e.NC="NC",e.ND="ND",e.MP="MP",e.OH="OH",e.OK="OK",e.OR="OR",e.PW="PW",e.PA="PA",e.PR="PR",e.RI="RI",e.SC="SC",e.SD="SD",e.TN="TN",e.TX="TX",e.UT="UT",e.VT="VT",e.VI="VI",e.VA="VA",e.WA="WA",e.WV="WV",e.WI="WI",e.WY="WY"}(V||(V={})),function(e){e.social="Social",e.foodAndDining="Food and Dining",e.restaurants="Restaurants",e.american="American",e.seafood="Seafood",e.steakhouses="Steakhouses",e.french="French",e.international="International",e.italian="Italian",e.cafes="Cafes",e.coffeeAndTeaHouses="Coffee and Tea Houses",e.bars="Bars",e.entertainment="Entertainment",e.musicAndShowVenues="Music and Show Venues",e.japanese="Japanese",e.sushi="Sushi",e.bakeries="Bakeries"}(F||(F={})),function(e){e.textSearch="textSearch",e.stateSelect="stateSelect",e.genreSelect="genreSelect"}(G||(G={}));var K,z=function(e){var t=e.onSubmit,n=Object(a.useRef)(""),c=Object(a.useRef)(!1),l=Object(j.a)({mode:"onChange"}),o=l.watch(G.textSearch),u=l.handleSubmit((function(e){null===t||void 0===t||t(e)}));return Object(a.useEffect)((function(){c.current=c.current||Boolean(o),c.current&&""===o&&""!==n.current&&u(),n.current=o}),[o,u]),r.a.createElement(H,{control:l.control,register:l.register,onSubmit:u},r.a.createElement(H.SearchInput,{placeholder:"Search Restaurants",name:G.textSearch,onClick:u}),r.a.createElement(H.Select,{className:"mt-3",label:"Select State",placeholder:"All",name:G.stateSelect,options:V,onChange:u}),r.a.createElement(H.Select,{className:"mt-3",label:"Select Cuisine Type",placeholder:"All",name:G.genreSelect,options:F,onChange:u}))},Y=function(){return r.a.createElement("h1",null,"Restaurant Search")},B=(n(48),n(31)),J=n.n(B),U=n(33),X=n.n(U),Z=n(32),q=n(21),$=(n(49),n(4)),Q=n.n($),_=function(e){var t=e.error;return(null===t||void 0===t?void 0:t.message)?r.a.createElement("p",{className:Q()("inline-error--root","m-0")},r.a.createElement(L.a,{className:"inline-error--icon"})," ",null===t||void 0===t?void 0:t.message):null},ee={pageSize:10,data:[],noDataMsg:"No data found"},te=function(e){var t=Object(i.a)({},ee,{},e),n=Object(a.useState)(1),c=Object(u.a)(n,2),l=c[0],o=c[1],s=t.data.length>t.pageSize&&!t.error,m=t.data.slice((l-1)*t.pageSize,l*t.pageSize);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.values(t.headers).map((function(e,n){var a,c,l=(null===(a=t.columnWidths)||void 0===a?void 0:a[n])?{width:"".concat((null===(c=t.columnWidths)||void 0===c?void 0:c[n])/12*100,"%")}:void 0;return r.a.createElement("th",{key:e,style:l},e)})))),r.a.createElement("tbody",null,t.isLoading?r.a.createElement(r.a.Fragment,null,Array.from({length:t.pageSize}).map((function(e,n){return r.a.createElement("tr",{key:n},Object.keys(t.headers).map((function(e){return r.a.createElement("td",{key:e},r.a.createElement(X.a,null))})))}))):t.error?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:Object.keys(t.headers).length},r.a.createElement(_,{error:t.error}))):t.data.length?r.a.createElement(r.a.Fragment,null,m.map((function(e){return r.a.createElement("tr",{key:e.id},Object.keys(t.headers).map((function(t){return r.a.createElement("td",{key:t},r.a.createElement(J.a,{text:e[t],className:"table--data-clamp",lines:2,id:"".concat(e.id,"-").concat(t),moreText:"+",lessText:"-"}))})))}))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:Object.keys(t.headers).length},r.a.createElement("p",{className:"m-0"},t.noDataMsg))))),s&&r.a.createElement(q.a,null,Array.from({length:Math.ceil(t.data.length/t.pageSize)}).map((function(e,t){var n=t+1;return r.a.createElement(q.a.Item,{onClick:function(){return o(n)},key:n,active:l===n},n)}))))};!function(e){e.name="Name",e.city="City",e.state="state",e.telephone="Phone Number",e.genre="Cuisine Types"}(K||(K={}));var ne=function(e){var t=e.data,n=e.isLoading,c=e.error,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(a.useMemo)((function(){return e.map((function(e){return Object(i.a)({},e,{genre:e.genre.join(", "),tags:e.tags.join(", ")})}))}),[e])}(t);return r.a.createElement(te,{columnWidths:[2,2,2,2,4],isLoading:n,error:c,data:l,headers:K,noDataMsg:"There are no restaurants that match your filters."})},ae=n(7),re=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()(g,Object(i.a)({headers:{Authorization:f},method:"GET",formatter:E(p)},e))}(),o=l.data,s=l.isLoading,d=l.error,h=function(e,t){return Object(a.useMemo)((function(){return e?t?e.reduce((function(e,n){return!t.textSearch||n.name.match(new RegExp(t.textSearch,"i"))||n.city.match(new RegExp(t.textSearch,"i"))||n.genre.join("").match(new RegExp(t.textSearch,"i"))?t.stateSelect&&t.stateSelect!==n.state?e:!t.genreSelect||n.genre.find((function(e){return e===t.genreSelect}))?[].concat(Object(ae.a)(e),[n]):e:e}),[]):e:[]}),[e,t])}(o,n);return r.a.createElement(M,null,r.a.createElement(A,null,r.a.createElement(Y,null)),r.a.createElement(O,null,r.a.createElement(x,null,r.a.createElement(z,{onSubmit:function(e){c(e)}})),r.a.createElement(N,null,r.a.createElement(ne,{data:h,error:d,isLoading:s}))))},ce=function(){return r.a.createElement(o.b.Provider,{value:{}},r.a.createElement(re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.176c5ce1.chunk.js.map